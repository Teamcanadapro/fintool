/*upper style*/
*{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:'Segoe UI',sans-serif;background:#f4f7fb;color:#222;display:flex;flex-direction:column;align-items:center;padding:20px;}
    h1,h2{color:#1a73e8;margin-bottom:8px;}
    .version,.last-updated{font-size:.85rem;color:#555;margin-bottom:16px;}
    .inputs-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  width: 100%;
  max-width: 520px; /* changed from 900px */
  box-sizing: border-box; /* recommended */
}

    .input-group, .slider-group {
  padding: 12px;
  border-radius: 8px;
}

/* üî• Light Mode Styling (default if NOT dark) */
body:not(.dark) .input-group,
body:not(.dark) .slider-group {
  background-color: #f9f9fc;
  border: 1px solid #bbb;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
}

    label{display:block;margin-bottom:6px;font-weight:600;}
    input[type=number],input[type=text],input[type=range]{font-size:1rem;}
    input[type=number],input[type=text]{width:100%;padding:6px;margin-bottom:4px;border:1px solid #aaa;border-radius:4px;}
    .slider-container{display:flex;align-items:center;gap:8px;}
    .output{font-size:1.2rem;font-weight:600;margin:16px 0;text-align:center;}
#finChart{
  display:block;
  width:100%;
  max-width:none;      /* no cap */
  height:auto;         /* base height; expanded CSS will set real height */
  background:#fff;
  border-radius:6px;
  box-shadow:0 2px 6px rgba(0,0,0,0.05);
}



    .buttons{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-bottom:20px;}
    .btn{padding:10px 20px;font-size:1rem;color:#fff;border:none;border-radius:4px;cursor:pointer;}
    .btn-red{background:#d32f2f;} .btn-red:hover{background:#b71c1c;}
    .btn-blue{background:#1976d2;} .btn-blue:hover{background:#0d47a1;}
    .btn-green{background:#388e3c;} .btn-green:hover{background:#1b5e20;}
    #ageWarning{color:#d84315;text-align:center;margin-bottom:10px;display:none;}
    @media print{.btn,.buttons,.last-updated{display:none;}body{padding:0;background:none;}}
 
.switch {
  position: relative;
  display: inline-block;
  width: 30px;
  height: 12px;
  margin-top: 4px;
}


.switch input { display: none; }

.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: #ccc;
  transition: 0.4s;
  border-radius: 24px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 14px;
  width: 14px;
  left: 2px;
  bottom: 2px;
  background-color: white;
  transition: 0.4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #4caf50;
}

input:checked + .slider:before {
  transform: translateX(18px);
}

.version-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.9em;
  margin-bottom: 10px;
}

.version,
.last-updated {
  margin-right: 15px;
  white-space: nowrap;
}


.inputs-container,
.results-container {
  flex: 1 1 400px;
  max-width: 480px;
}

.graph-container {
  flex: 1 1 auto;
  min-width: 300px;
  width: 100%;
  padding: 0 0 10px;
  box-sizing: border-box;
}


.main-wrapper {
  display: flex;
  justify-content: center;
  width: 100%;
}

.fin-toggle-centered {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}


@media (min-width: 540px) {
  .main-layout {
    flex-direction: row;
  }

 .left-column,
.inputs-container {
  flex: 1 1 480px;
  min-width: 240px;
  max-width: 520px;
}

.inputs-container {
  margin-top: 0px;
}

}


body.dark {
  background: #121212;
  color: #eee;
}

body.dark .input-group,
body.dark .slider-group,
body.dark .results-container,
body.dark .graph-container,
body.dark .buttons {
  background: #1e1e1e;
  color: #eee;
}

body.dark input[type=number],
body.dark input[type=text],
body.dark input[type=range] {
  background: #2a2a2a;
  color: #fff;
  border: 1px solid #444;
}

body.dark .btn-red,
body.dark .btn-blue,
body.dark .btn-green {
  opacity: 0.9;
}

body.dark table {
  color: #ddd;
}

body.dark th {
  background: #333;
}

body.dark td {
  background: #1e1e1e;
}


.header-title {
  font-size: 1.8rem;
  color: #007bff;
  margin: 0;
  white-space: nowrap;  /* ‚õî Prevents line break */
}


.dark-mode-inline {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.95rem;
}


.highlight-success {
  color: #3df283;
  font-weight: bold;
}

.info-icon {
  margin-left: 6px;
  cursor: help;
  font-size: 14px;
  color: #aaa;
}
.info-icon:hover {
  color: #fff;
}

.tooltip-container {
  position: relative;
  display: inline-block;
  
  overflow: visible;
}
.tooltip-container::after {
  content: none !important;
}


.tooltip-text {
  font-weight: normal;
  visibility: hidden;
  opacity: 0;
  background-color: #fff8b3;
  color: #222;
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid #e0c300;
  position: absolute;
  top: 100%; /* ‚¨áÔ∏è show below the element */
  left: 50%;
  transform: translateX(-50%) translateY(6px);
  z-index: 100;
  transition: opacity 0.2s ease, transform 0.2s ease;
  white-space: normal;
  max-width: 250px;
  width: max-content;
  word-wrap: break-word;
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);
  text-align: center;
}

.tooltip-container:hover .tooltip-text {
  visibility: visible;
  opacity: 1;
  transform: translateX(-50%) translateY(10px);
}
.summary-box {
  background-color: var(--card-bg, #fff);
  color: var(--text-color, #000);
  padding: 20px 24px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  font-size: 0.95rem;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(2, auto);
  gap: 24px 48px; /* vertical gap 24px, horizontal gap 48px */
}

.summary-header {
  display: contents; /* lets summary-box handle grid */
}

.output {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  white-space: nowrap;
  padding: 0;
}

.label-row {
  display: flex;
  align-items: center;
  gap: 6px;
  font-weight: 600;
  font-size: 1rem;
  margin-bottom: 6px;
}

.icon {
  font-size: 1.3rem;
  line-height: 1;
}

.output strong {
  font-size: 1.4rem;
  color: #007bff;
  font-weight: 700;
  white-space: nowrap;
}

/* Tooltip styles can remain as is, or add margin if needed */
.tooltip-text {
  font-weight: normal;
  font-size: 0.85rem;
  max-width: 260px;
  margin-top: 6px;
  color: #444;
}

/* Dark mode */
body.dark .summary-box {
  background-color: #1a1a1a;
  color: #eee;
  box-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

body.dark .output strong {
  color: #3399ff;
}

body.dark .tooltip-text {
  background-color: #444c00;  /* darker yellow/olive */
  color: #fff;                /* white text for contrast */
  border-color: #666600;      /* darker border to match */
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.8); /* subtle shadow for legibility */
}



/* Only applied when .debug-layout is on <body> */
.debug-layout .main-layout {
  outline: 2px dashed #444;
  position: relative;
}

.debug-layout .left-column {
  background-color: rgba(0, 128, 255, 0.05);
  border: 1px solid rgba(0, 128, 255, 0.2);
  position: relative;
}

.debug-layout .inputs-container {
  background-color: rgba(255, 128, 0, 0.05);
  border: 1px solid rgba(255, 128, 0, 0.2);
  position: relative;
}

.debug-layout .left-column::before,
.debug-layout .inputs-container::before {
  content: attr(class);
  position: absolute;
  top: -1.5em;
  font-size: 12px;
  font-family: monospace;
  background: #222;
  color: #0f0;
  padding: 2px 6px;
  border-radius: 4px;
}

.main-layout {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: flex-start;
  gap: 10px;
  width: 100%;
  max-width: 1600px;
  margin: 0 auto;
  box-sizing: border-box;
}

.middle-column {
  flex: 1 1 580px;
  min-width: 320px;
  max-width: 700px;
}

.main-layout.chart-is-expanded .middle-column {
  max-width: none;
}

.right-column {
  flex: 0 1 340px;
  max-width: 400px;
  min-width: 240px;
}




@media (max-width: 768px) {
  .main-layout {
    flex-direction: row;
    row-gap: 10px; /* Adjust this value to your liking, or set to 0 to remove the gap completely */
  }


  .inputs-container {
    margin-top: 0px;
  }

  /* Reduces side padding on the whole page */
  body {
    padding: 10px;
  }
}



.fin-toggle {
  display: inline-flex;
  align-items: center;
  margin-right: 12px;
  min-width: 150px; /* ‚¨ÖÔ∏è Keep toggles equally spaced */
  justify-content: space-between;
}

.fin-toggle label {
  margin-right: 8px;
  white-space: nowrap;
}


.toggle-item {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 200px;
  white-space: nowrap;
  justify-content: center;
}

#scenario-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);  /* üß± 4 equal columns */
  gap: 10px;
  max-width: 100%;
  margin: 12px auto;
  padding: 0 10px;
}



/* üîÅ Base (dark mode default) */
.scenario-btn {
  background-color: #444;
  color: white;
  border: 1px solid #888;
  padding: 8px 12px;
  font-size: 14px;
  font-weight: bold;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s, color 0.2s;
}

.scenario-btn.active {
  background-color: #0094ff;
  border-color: #0094ff;
}


.scenario-btn:hover {
  background-color: #666;
}

/* --- Modern Light Mode Scenario Buttons --- */

/* Default (Inactive) Button Style in Light Mode */
body:not(.dark) .scenario-btn {
  background-color: #ffffff;    /* Clean white background */
  color: #1976d2;             /* Use primary blue for text */
  border: 1px solid #dadce0;     /* Soft, modern gray border */
  font-weight: 600;              /* Slightly bolder text */
}

/* Hover State for Inactive Buttons in Light Mode */
body:not(.dark) .scenario-btn:not(.active):hover {
  background-color: #f8fbff;    /* A very subtle light blue glow */
  border-color: #cce0fc;         /* A slightly stronger blue border */
}

/* Active Button Style in Light Mode */
body:not(.dark) .scenario-btn.active {
  background-color: #1976d2;    /* Solid primary blue background */
  color: #ffffff;                /* White text for contrast */
  border-color: #1976d2;         /* Matching solid blue border */
}

/* --- Modern Expand Button --- */
.graph-expand-btn {
  /* Positioning and Shape */
  display: block;
  text-align: center;
  width: -moz-fit-content;
  width: fit-content;
  margin: 12px auto 0; /* Centers the button horizontally */
  padding: 6px 16px;
  border-radius: 99px; /* Creates the pill shape */
  
  /* Font and Appearance */
  font-size: 0.8rem; /* 13px */
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
}

/* Light Mode Colors */
body:not(.dark) .graph-expand-btn {
  background-color: #f1f3f4;
  color: #3c4043;
}

/* Dark Mode Colors */
body.dark .graph-expand-btn {
  background-color: #3c4043;
  color: #e8eaed;
}

/* Hover Effect */
.graph-expand-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

body.dark .graph-expand-btn:hover {
   box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}


#futureIncomeDisplay {
  background: #f0f0f0;
  color: #000;
  border: 1px solid #ccc;
}

body.dark #futureIncomeDisplay {
  background: #2a2a2a;
  color: #fff;
  border: 1px solid #555;
}
.readonly-box {
  background: #f0f0f0;
  color: #000;
  border: 1px solid #ccc;
  border-radius: 4px;

  box-sizing: border-box;
  padding: 2px 4px;

  text-align: left;
  white-space: nowrap;

  font-size: 1rem; 
  line-height: 1.2;

  width: 100%;
  min-width: 0;
  max-width: 100%;

  overflow: hidden; /* ‚úÖ stops scrollbars if value is still too large momentarily */
}





body.dark .readonly-box {
  background: #2a2a2a;
  color: #fff;
  border: 1px solid #555;
}

.autoscale {
  font-size: 1.2rem;
  transition: font-size 0.2s ease;
}

.header-layout {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: flex-start;
  gap: 20px;
  max-width: 1200px;
  margin: 0 auto;
}


.header-flex {
  display: flex;
  justify-content: space-between;
  align-items: center;  /* ‚úÖ now centers vertically */
  flex-wrap: wrap;
  gap: 16px;
  max-width: 1100px;
  margin: 0 auto 10px auto;
}
@media (max-width: 600px) {
  .header-flex {
    flex-direction: column;
    align-items: center;
  }
}

.header-left {
  display: flex;
  flex-direction: column;
  justify-content: center;
  flex: 1;
}

@media (max-width: 600px) {
  .header-left {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .header-title {
    margin-bottom: 2px;
  }
}
.header-center {
  flex-grow: 1;
  display: flex;
  justify-content: flex-end;  /* üëà pushes toggles to the right */
}
.toggle-bar {
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  align-items: center;
}

@media (max-width: 600px) {
  .toggle-bar {
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
  }

  .toggle-item {
    font-size: 13px;
    flex: 1 1 30%;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .switch {
    transform: scale(0.75);
  }
}

.version-info {
  font-size: 0.65rem;  /* smaller font size */
  opacity: 0.75;
  margin-top: 4px;     /* a little space below the title */
  white-space: nowrap; /* prevent wrapping */
}
#tableSection {
  margin-top: 20px;
  background: var(--card-bg, #fff);
  color: var(--text-color, #000);
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  font-size: 0.9rem;
  max-width: 900px;
  padding: 0;
}

#tableHeader {
  cursor: pointer;
  padding: 14px 20px;
  font-weight: 700;
  font-size: 1.2rem;
  user-select: none;
  background: #007bff;
  color: white;
  border-radius: 8px 8px 0 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}


/* Dark mode */
body.dark #tableSection {
  background: #1a1a1a;
  color: #eee;
  box-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

body.dark #tableHeader {
  background: #3399ff;
  color: #eee;
}

body.dark #tableContent {
  background: #222;
}
#tableContent {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.35s ease;
}

#tableContent.open {
  max-height: 1500px;
}


body.debug-layout .header-flex,
body.debug-layout .main-wrapper,
body.debug-layout .main-layout,
body.debug-layout .header-flex,
body.debug-layout .header-left,        /* ‚¨ÖÔ∏è ADD THIS */
body.debug-layout .main-wrapper,
body.debug-layout .left-column,
body.debug-layout .middle-column,
body.debug-layout .right-column,
body.debug-layout .inputs-container,
body.debug-layout .graph-container,
body.debug-layout .summary-bar,
body.debug-layout .summary-box,
body.debug-layout .graph-modal-content,
body.debug-layout #scenario-row,
body.debug-layout #faq,
body.debug-layout #tableView {
  position: relative;
}

body.debug-layout .header-flex::before,
body.debug-layout .header-flex::before,
body.debug-layout .header-left::before, /* ‚¨ÖÔ∏è ADD THIS */
body.debug-layout .main-wrapper::before,
body.debug-layout .main-wrapper::before,
body.debug-layout .main-layout::before,
body.debug-layout .left-column::before,
body.debug-layout .middle-column::before,
body.debug-layout .right-column::before,
body.debug-layout .inputs-container::before,
body.debug-layout .graph-container::before,
body.debug-layout .summary-bar::before,
body.debug-layout .summary-box::before,
body.debug-layout .graph-modal-content::before,
body.debug-layout #scenario-row::before,
body.debug-layout #faq::before,
body.debug-layout #tableView::before {
  content: attr(class);
  position: absolute;
  top: -1.5em;
  left: 0;
  font-size: 12px;
  font-family: monospace;
  background: #222;
  color: #0f0;
  padding: 2px 6px;
  border-radius: 4px;
  z-index: 1000;
}

/* Light Theme */
.tippy-box[data-theme~='light'] {
  background-color: #fffbe7;
  color: #222;
  border: 1px solid #e0c300;
  font-size: 13px;
  padding: 6px 10px;
  border-radius: 6px;
  text-align: left;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Dark Theme */
.tippy-box[data-theme~='dark'] {
  background-color: #2e2e2e;
  color: #f8f8a3;
  border: 1px solid #888800;
  font-size: 13px;
  padding: 6px 10px;
  border-radius: 6px;
  text-align: left;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

#tableView table tbody tr:nth-child(even) {
  background-color: #e9f1fb; /* Soft sky blue for better contrast */
}

body.dark #tableView table tbody tr:nth-child(even) {
  background-color: #1f1f1f; /* a notch lighter than pure black */
}

#tableView table td {
  border-bottom: 1px solid #ccc;
}

body.dark #tableView table td {
  border-bottom: 1px solid #444;
}

#tableView table .retirement-row {
  background-color: #fff9db !important; /* Light golden highlight */
  font-weight: 600;
}

body.dark #tableView table .retirement-row td {
  background-color: #5c4500 !important; /* Deep amber */
  color: #e0f2f1 !important;            /* Warm yellow text */
  font-weight: 600;
}

#tableView table .on-track-green {
  background-color: #c8facc !important; /* Pale green for light mode */
  color: #006400 !important;            /* Dark green text */
  font-weight: 600;
}

body.dark #tableView table .on-track-green td {
  background-color: #006400 !important; /* Toggle-matching teal */
  color: #e0f2f1 !important;            /* Light mint for contrast */
  font-weight: 600;
}
body.dark #tableView table .on-track-green,
body.dark #tableView table .on-track-green td,
body.dark #tableView table td.on-track-green {
  background-color: #006400 !important;
  color: #e0f2f1 !important;
  font-weight: 600;
}





/* --- Final Styles for Expanded Chart (fixed) --- */

.main-layout.chart-is-expanded .middle-column {
  flex: 1;
  height: 70vh;            /* gives a nice tall area */
}

.main-layout.chart-is-expanded .graph-container {
  display: block;
  height: 100%;
  flex-direction: unset;   /* not needed when display:block */
}

.main-layout.chart-is-expanded .right-column {
  display: none;
}

/* Base graph container rules */
.graph-container {
  display: block;
  width: 100%;
  height: auto;
  padding: 0;
  margin: 0 auto;
  padding-bottom: 6px;
}

#finChartContainer {
  display: block;
  width: 100%;
  height: 100%;
}



@media (max-width: 1530px) {
  .main-layout.chart-is-expanded {
    flex-direction: column;
    align-items: center;
  }

  .main-layout.chart-is-expanded .middle-column {
    width: 100%;
    max-width: 100%;
    height: auto;
  }

  .main-layout.chart-is-expanded .graph-container {
    width: 100%;
    height: 60vh;     /* responsive height on narrower screens */
    margin-top: 20px;
  }
}
@media (max-width: 1530px) {
  /* your existing small screen styles */
}

/* Let middle column use all remaining width and reduce the left column width */
.left-column { flex: 0 0 420px; }       /* make inputs a fixed narrower column */
.main-layout.chart-is-expanded .middle-column { max-width: none; flex: 1 1 auto; }
.main-layout.chart-is-expanded .graph-container,
#finChartContainer { width: 100%; height: 70vh; }
#finChart { width: 100% !important; height: 100% !important; }


@media (max-width: 600px) {
  .summary-bar {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: auto auto;
    gap: 20px;
    justify-items: center;
    width: 100%;
  }

  .summary-bar .output {
    width: 100%;
    max-width: 100%;
    min-width: 0;
    text-align: center;
  }
}

.on-track-green {
  background-color: #c7f7c1 !important;
  color: #176a12 !important;
  font-weight: bold;
}
.on-track-green td {
  background-color: #c7f7c1 !important;
  color: #176a12 !important;
}


/* Standardize slider thumb color across devices */
input[type=range] {
  accent-color: #1a73e8; /* For modern Chrome, Edge, Firefox */
}

input[type=range]::-webkit-slider-thumb {
  background-color: #1a73e8;
}

input[type=range]::-moz-range-thumb {
  background-color: #1a73e8;
}

#calcDragHandle {
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  cursor: grab;
  padding: 10px;
  width: 100%;
}

/* Green highlight for on-track retirement row */
.retirement-row.on-track {
  background-color: #d1f2cc !important;  /* Light green */
  color: #145d19 !important;            /* Dark green text */
}
body.dark .retirement-row.on-track {
  background-color: #2a3f2a !important; /* Darker green for dark mode */
  color: #8fffa1 !important;            /* Light green text */
}

/* --- New Layout for Top Interactive Area --- */

.top-interactive-area {
  display: flex;
  flex-direction: column; /* Mobile First: Stack vertically by default */
  width: 100%;
  max-width: 1100px; /* Match the header width */
  margin: 0 auto;
  gap: 10px;
}

/* On screens wider than 1000px, switch to a side-by-side layout */
@media (min-width: 1000px) {
  .top-interactive-area {
    flex-direction: row; /* Horizontal layout */
    align-items: center; /* Vertically center the items */
    justify-content: space-between;
    gap: 20px;
  }

  #scenario-row {
    flex: 1 1 auto; /* Allow the scenario buttons to grow and fill available space */
    margin: 0;
  }

  .summary-bar {
    flex: 0 0 auto; /* Prevent the summary bar from growing or shrinking */
    margin: 0;
    padding: 12px 20px;
    border-radius: 8px;
    background-color: #f9f9fc;
    border: 1px solid #ddd;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }

  body.dark .summary-bar {
    background-color: #1e1e1e;
    border-color: #444;
  }
}
/* EXPANDED (keep inputs visible) ‚Äî final overrides */
.left-column { flex: 0 0 420px; }                 /* narrower inputs column */

.main-layout.chart-is-expanded .middle-column {
  max-width: none;
  flex: 1 1 auto;
}

.main-layout.chart-is-expanded .graph-container,
.main-layout.chart-is-expanded #finChartContainer {
  display: block !important;
  width: 100% !important;
  height: 70vh !important;
}

.main-layout.chart-is-expanded canvas#finChart {
  width: 100% !important;
  height: 100% !important;
}
/* === Canonical graph container rules === */
.graph-container {
  display: block;          /* full row, not inline-block */
  flex: 1 1 auto;          /* still allowed as a flex child */
  min-width: 300px;
  width: 100%;
  height: auto;
  padding: 0;
  margin: 0 auto;
  padding-bottom: 6px;
  box-sizing: border-box;
}

/* Chart wrapper + canvas fill the container */
#finChartContainer { width: 100%; height: 100%; }
#finChart { width: 100% !important; height: 100% !important; }

/* Expanded: keep inputs visible, give chart vertical space */
.main-layout.chart-is-expanded .graph-container {
  height: 70vh;            /* was 100% ‚Äî that depended on sibling height */
}

/* Narrower screens: a bit shorter */
@media (max-width: 1530px) {
  .main-layout.chart-is-expanded .graph-container {
    height: 60vh;
    margin-top: 20px;
  }
}
/* Keep inputs + chart side‚Äëby‚Äëside when expanded */
.main-layout.chart-is-expanded {
  flex-direction: row;     /* force row */
  flex-wrap: nowrap;       /* do NOT wrap to a new line */
  justify-content: flex-start; /* stop centering that encourages wrap */
  align-items: stretch;
}

/* Fixed width for inputs; chart takes the rest */
.left-column { flex: 0 0 420px; }     /* your chosen inputs width */
.main-layout.chart-is-expanded .middle-column { flex: 1 1 auto; max-width: none; }

@media (min-width: 1900px) {
  .main-layout {
    max-width: 1800px; /* widen main layout */
    padding: 0 40px;    /* optional padding on sides */
  }

  .middle-column {
    max-width: 1000px;  /* expand chart area */
  }

  .graph-container {
    height: 70vh;
  }

  #finChartContainer,
  canvas#finChart {
    height: 100% !important;
  }

  .left-column {
    flex: 0 0 380px; /* optionally slightly narrower inputs column */
  }

  .right-column {
    flex: 0 0 320px; /* reduce width slightly */
  }
}

@media (min-width: 1900px) {
  .main-layout {
    max-width: 1760px;
    padding: 0 30px;
  }

  .middle-column {
    max-width: 1040px;
  }

  .graph-container {
    height: auto;
    aspect-ratio: 16 / 9;
  }

  #finChartContainer {
    width: 100%;
    aspect-ratio: 16 / 9;
  }

  canvas#finChart {
    width: 100% !important;
    height: auto !important;
  }
}
@media (min-width: 1900px) {
  .graph-container {
    height: 500px; /* or tweak between 460‚Äì540px for best fit */
  }

  #finChartContainer {
    height: 100%;
  }

  canvas#finChart {
    width: 100% !important;
    height: 100% !important;
  }
}

@media (min-width: 1900px) {
  .graph-container {
  }

  #finChartContainer {
    height: 100%;
    max-height: 585px;
  }

  canvas#finChart {
    width: 100% !important;
    height: 100% !important;
  }
}

 /*END of upper style*/
 
 /* Calculator Styles (copy to your CSS or inside a <style> block) */
.hidden {
  display: none !important;
}

:root {
  --calc-bg: #23272d;
  --calc-panel: #1a1c1e;
  --calc-text: #fff;
  --calc-btn-bg: #2a2d34;
  --calc-btn-hover: #1976d2;
  --calc-btn-text: #fff;
  --calc-equals-bg: #1976d2;
}

body:not(.dark) {
  --calc-bg: #f4f5f7;
  --calc-panel: #fff;
  --calc-text: #222;
  --calc-btn-bg: #f0f0f0;
  --calc-btn-hover: #1976d2;
  --calc-btn-text: #222;
  --calc-equals-bg: #1976d2;
}



.calc-btn {
  background: var(--calc-btn-bg, #2a2d34);
  color: var(--calc-btn-text, #fff);
  border: none;
  border-radius: 6px;
  padding: 12px 0;
  font-size: 1.1em;
  cursor: pointer;
  transition: background 0.14s;
  min-width: 0;
  min-height: 44px;
}

.calc-btn:active,
.calc-btn:hover {
  background: var(--calc-btn-hover, #1976d2);
  color: #fff;
}

#calcEquals {
  background: var(--calc-equals-bg, #1976d2) !important;
  color: #fff !important;
  font-weight: bold;
}

/*END of calc style*/

  /* FAQ container styles */
  #faq {
  margin-top: 20px;
  background: var(--card-bg, #fff);
  color: var(--text-color, #000);
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  font-size: 0.9rem;
  padding: 0;
  width: 100%;
  max-width: 700px;         /* Match .middle-column width */
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
}
/* FAQ main header */
  #faqHeader {
  cursor: pointer;
  padding: 8px 12px;                /* smaller padding */
  font-weight: 600;
  font-size: 1rem;                  /* smaller font */
  user-select: none;
  background: #e0e7ff;              /* soft blue background */
  color: #1a237e;                   /* navy text */
  border-radius: 6px;
  border: 1px solid #c5cae9;        /* subtle border */
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: background 0.2s ease;
}

#faqHeader:hover {
  background: #d0d8ff;
}
  /* FAQ main content container, hidden by default */
  #faqContent {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.35s ease;
    background: var(--card-bg, #f9f9f9);
    border-radius: 0 0 8px 8px;
    padding: 0 20px;
  }

  #faqContent.open {
    padding: 16px 20px;
    max-height: 1000px; /* enough for content */
  }

  /* Individual question styles */
  .faq-item {
    border-bottom: 1px solid #ddd;
    padding: 12px 0;
  }

  .faq-question {
    cursor: pointer;
    font-weight: 600;
    position: relative;
    padding-right: 24px;
    user-select: none;
  }

  .faq-question::after {
    content: '+';
    position: absolute;
    right: 0;
    top: 0;
    font-weight: 700;
    font-size: 1.2rem;
    line-height: 1;
    transition: transform 0.3s ease;
  }

  .faq-question.open::after {
    content: '-';
    transform: rotate(180deg);
  }

  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease, padding 0.3s ease;
    padding-left: 8px;
    color: #333;
    font-weight: normal;
    font-size: 0.9rem;
  }

  .faq-answer.open {
    padding-top: 8px;
    padding-bottom: 8px;
    max-height: 500px; /* large enough for most answers */
  }

  /* Dark mode tweaks */
  body.dark #faq {
    background: #1a1a1a;
    color: #eee;
    box-shadow: 0 2px 10px rgba(0,0,0,0.5);
  }

  body.dark #faqHeader {
  background: #1e1e1e;
  color: #ddd;
  border: 1px solid #333;
}
body.dark #faqHeader:hover {
  background: #2a2a2a;
}
  body.dark #faqContent {
    background: #222;
  }

  body.dark .faq-item {
    border-color: #444;
  }

  body.dark .faq-answer {
    color: #ccc;
  }
  
  .summary-bar {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 32px;
  margin: 10px auto 10px;
  font-size: 0.95rem;
  max-width: 960px;
}

.summary-item {
  text-align: center;
  position: relative;
  min-width: 130px;
}

.summary-item strong {
  font-size: 1.4rem;
  color: #007bff;
  display: block;
  margin-bottom: 4px;
}

.summary-item .label-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-weight: 600;
  font-size: 1rem;
}

.summary-item .icon {
  font-size: 1.3rem;
  line-height: 1;
}

body.dark .summary-item strong {
  color: #3399ff;
}

/* Removes top padding from only the first item in the inputs column */
.inputs-container > .input-group:first-child,
.inputs-container > .slider-group:first-child {
  padding-top: 0;
}

.summary-bar .output {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
}
@media (max-width: 540px) {
  .summary-bar {
    justify-content: center;
    gap: 24px;
    margin-top: 12px;
  }
}

body.dark .summary-bar {
  background-color: transparent;
}
.scenario-btn.active:hover {
  background-color: #007bff !important;
  color: white !important;
  border-color: #007bff !important;
}

#finChartContainer {
  width: 100%;
  max-width: none;
  height: 100%;
  border-radius: 8px;
  display: block;
  overflow: hidden;
}


/* Light Mode Styling */
body:not(.dark) #finChartContainer {
  background-color: #f9f9fc;
  border: 1px solid #bbb;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
}

/* Optional Dark Mode */
body.dark #finChartContainer {
  background-color: #1e1e1e;
  border: 1px solid #444;
}

#finChart {
  display: block;
  width: 100%;
  height: auto;
  background-color: transparent;
}
.chart-disclaimer {
  font-size: 0.70rem; 
  color: #555;
  text-align: center;
  margin-top: 15px;
  line-height: 1.4;
  max-width: auto; /* Prevents it from becoming too wide */
  margin-left: auto;
  margin-right: auto;
}

body.dark .chart-disclaimer {
  color: #aaa;
}

/* --- Style for the new "Expand in Place" button --- */
.graph-expand-btn-2 {
  /* Positioning and Shape */
  display: block;
  text-align: center;
  width: fit-content;
  margin: 12px 0 0; /* Aligns with the other button */
  padding: 6px 16px;
  border-radius: 99px; /* Pill shape */
  
  /* Font and Appearance */
  font-size: 0.8rem;
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
}

/* Light Mode Colors */
body:not(.dark) .graph-expand-btn-2 {
  background-color: #e8f0fe;
  color: #1967d2;
}

/* Dark Mode Colors */
body.dark .graph-expand-btn-2 {
  background-color: #2e3a47;
  color: #8ab4f8;
}

/* Hover Effect */
.graph-expand-btn-2:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

body.dark .graph-expand-btn-2:hover {
   box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

@media (min-width: 1600px) {
  .main-layout {
    max-width: 1800px;
    padding: 0 30px;
  }

  .middle-column {
    max-width: 1100px;
  }

  .graph-container {
    height: 72vh;
  }

  #finChartContainer,
  #finChart {
    height: 100% !important;
    width: 100% !important;
  }
}
@media (min-width: 1600px) {
  .main-layout {
    max-width: 1760px;     /* widen layout slightly */
    justify-content: space-between;
    padding: 0 20px;
  }

  .middle-column {
    max-width: 1000px;     /* chart column expands */
  }

  .graph-container {
    height: 68vh;          /* chart gets taller */
  }

  .left-column {
    flex: 0 0 520px;       /* keep input block size same as before */
  }

  .right-column {
    flex: 0 0 380px;       /* table column size as before */
  }

  #finChartContainer,
  #finChart {
    width: 100% !important;
    height: 100% !important;
  }
}



